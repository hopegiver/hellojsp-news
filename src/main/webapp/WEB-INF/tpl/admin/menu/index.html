<div class="page-content container" style="margin-left: 0">
    <div class="page-header">
        <h1 class="page-title text-primary-d2">
            Menu
            <small class="page-info text-secondary-d2">
                <i class="fa fa-angle-double-right text-80"></i>
                Admin editable menu list
            </small>
        </h1>
    </div>
    <div class="row" style="margin-bottom: 30px;">
        <div class="col-9" style="text-align: left;">
            <a href="create.jsp" class="btn btn-md btn-info">New</a>
        </div>
        <div class="col-3" style="text-align: right">
            <form name="form1" method="get" class="form-inline" style="padding-left: 30px">
                <input type="text" name="s_keyword" class="form-control">
                <input class="btn btn-info" type="submit" value="Search">
            </form>
            ${form_script}
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6 mt-3 mt-md-0">
            <div class="card border-0">
                <div class="card-header bgc-default-d2">
                    <h3 class="card-title text-130 text-white">
                        Choose Categories
                    </h3>
                </div>
                <div class="card-body bgc-white border-1 border-t-0 brc-default-m2">
                    <div class="jqtree" id="id-jqtree-categories"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12">
            <table class="table table-striped-success table-borderless text-dark-m1" id="responsive-table">
                <thead class="text-dark-m3 bgc-grey-l4">
                <tr class="bgc-success-m1 text-white">
                        <th>ID</th>
                        <th>Menu name</th>
                        <th>Parent Id</th>
                        <th>sort</th>
                        <th>Reg Date</th>
                        <th>Manage</th>
                    </tr>
                </thead>
                <tbody>
                    #foreach($item in $menuInfo)
                        #if(${item.parent_id} == 0)
                        <tr>
                            <td><a href="read.jsp?id=${item.id}">${item.id}</a></td>
                            <td><a href="read.jsp?id=${item.id}">${item.menu_name}</a></td>
                            <td>
                                #foreach($parent in $parent)
                                    #if(${parent.id} == ${item.parent_id})
                                        ${parent.menu_name}
                                    #end
                                #end
                            </td>
                            <td>${item.sort}</td>
                            <td>${item.reg_date}</td>
                            <td>
                                <a href="read.jsp?id=${item.id}" class="btn radius-1 btn-sm btn-brc-tp btn-outline-default btn-h-outline-primary btn-a-outline-primary btn-text-primary"><i class="fa fa-eye"></i> </a>
                                <a href="update.jsp?id=${item.id}" class="btn radius-1 btn-sm btn-brc-tp btn-outline-default btn-h-outline-success btn-a-outline-success btn-text-success"><i class="fa fa-pencil-alt"></i> </a>
                                <a href="delete.jsp?id=${item.id}" class="btn radius-1 btn-sm btn-brc-tp btn-outline-default btn-h-outline-danger btn-a-outline-danger btn-text-danger"><i class="fa fa-trash-alt"></i> </a>
                            </td>
                        </tr>
                        #end
                        #foreach($subItem in $subMenu)
                            #if(${item.id} == ${subItem.parent_id})
                                <tr style="background-color: #c9cacd">
                                    <td><a href="read.jsp?id=${subItem.id}">${subItem.id}</a></td>
                                    <td><a href="read.jsp?id=${subItem.id}">${subItem.menu_name}</a></td>
                                    <td>
                                        #foreach($parent in $parent)
                                        #if(${parent.id} == ${subItem.parent_id})
                                        ${parent.menu_name}
                                        #end
                                        #end
                                    </td>
                                    <td>${subItem.sort}</td>
                                    <td>${subItem.reg_date}</td>
                                    <td>
                                        <a href="read.jsp?id=${subItem.id}" class="btn radius-1 btn-sm btn-brc-tp btn-outline-default btn-h-outline-primary btn-a-outline-primary btn-text-primary"><i class="fa fa-eye"></i> </a>
                                        <a href="update.jsp?id=${subItem.id}" class="btn radius-1 btn-sm btn-brc-tp btn-outline-default btn-h-outline-success btn-a-outline-success btn-text-success"><i class="fa fa-pencil-alt"></i> </a>
                                        <a href="delete.jsp?id=${subItem.id}" class="btn radius-1 btn-sm btn-brc-tp btn-outline-default btn-h-outline-danger btn-a-outline-danger btn-text-danger"><i class="fa fa-trash-alt"></i> </a>
                                    </td>
                                </tr>
                            #end
                        #end
                    #end
                </tbody>
            </table>
            <div class="pagination justify-content-center">
                ${pagebar}
            </div>
        </div>
    </div>
    <hr class="border-double my-4 brc-secondary-l2" />
    <script>
var categoryData = [
#foreach($item in $menuInfo)
    #if(${item.parent_id} == 0)
        {
    id: ${item.id},
    name: "${item.menu_name}",
    children: [
        #foreach($subItem in $subMenu)
        #if(${item.id} == ${subItem.parent_id} && ${subItem.parent_id} > 0)
        {
            id: ${subItem.id},
            name: "${subItem.menu_name}",
        },
    #end
    #end
    ]
        },
    #end
#end
];

        console.log(categoryData2);
        var category = "${menuInfo}";
    </script>
</div>